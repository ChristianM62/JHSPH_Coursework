*September 10, 2015*First Assignmentset varabbrev off/* you are going to have to write a command to tell stata where the data is */* use "C:\dgaskin\dr. gaskin files\309 716\meps08.dta", clear svyset varpsu [pweight = perwt08f], strata(varstr)/* IÕm trimming the data and looking at the dependent variable makes sense*/summarize totexp08summarize totexp08, detailgen healthexp = totexp08replace healthexp = . if totexp08 >50000summarize healthexpsummarize healthexp, detail/* Create the log of health expenditure variable */gen lnhealthexp = ln(1+healthexp)summarize ttlp08xsummarize ttlp08x, detailgen income = ttlp08x             replace income = . if ttlp08x < 0 			/*sets negative values to missing*/replace income = . if ttlp08x > 170000summarize incomesummarize income, detail/*Create the independent variables */summarize age08xgen age = age08xreplace age = . if age08x < 0summarize agegen agecat = 1 if age08x >=0 & age08x <=24replace agecat = 2 if age08x >=25 & age08x <=44replace agecat = 3 if age08x >=45 & age08x <=64replace agecat = 4 if age08x >=65 & age08x <=74replace agecat = 5 if age08x >=75label define agecats 1  "0-18" 2 "18-24" 3  "25-44" 4 "45-64" 5 "65-74" 6 "75+"label values agecat agecats /*set label name sexn to the variable sex*/gen female = 0 if sex == 1replace female = 1 if sex == 2label define sexn 0 "Male" 1 "Female"label values female sexnlabel define raceethn 1 "Hispanic" 2 "Black non-Hispanic" 3 "Asian non-Hispanic" 4 "Other race/not Hispanic"label values racethnx raceethnlabel define racexn 1 "White" 2 "Black" 3 "Amer Indian/Alaska Native" 4 "Asian" 5 "Native Hawaiian/Pacific Islander" 6 "Multiple races reported"label values racex racexngen race = 1 if racex == 1 & racethnx != 1replace race = 2 if racex == 2 & racethnx != 1replace race = 3 if racethnx == 1replace race = 4 if racex == 4 & racethnx != 1replace race = 5 if (racex == 3 | racex == 5 | racex == 6) & racethnx != 1label define racexn2 1 "White" 2 "Black" 3 "Hispanic" 4 "Asian" 5 "Other"label values race racexn2gen education = 1 if educyr >=0 & educyr <=8replace education = 2 if educyr >=9 & educyr <=12 & hideg == 1 /*Some High School*/replace education = 2 if educyr >=9 & educyr <=11 & hideg <0 /* Some High School but didn't answer hideg question*/replace education = 3 if hideg == 2 | hideg == 3 /*High School*/replace education = 4 if educyr >=13 & educyr <=17 & hideg == 3 /*Some college-In school but only have high school diploma*/replace education = 5 if hideg == 4replace education = 6 if hideg == 5 | hideg ==6replace education = 6 if educyr == 17 & hideg == 7 /*Advanced Degree* - implies law degree or similar type*/label define educn 1 "No High School" 2 "Some High" 3 "High School/GED" 4 "Some College/Tech School/AA degree" 5 "College"  6 "Advanced Degree"label values education educngen insurance = 1 if inscov08 ==1replace insurance = 2 if inscov08 == 2 & mcrev08 == 2 /*Had public insurance but not medicare*/replace insurance = 3 if inscov08 ==3replace insurance = 4 if inscov08 == 2 & mcrev08 == 1 /* Medicare */label define insr 1 "Private Insurance" 2 "Public Insurance" 3 "Uninsured" 4 "Medicare" label values insurance insrgen msa = 0 if msa08 == 0replace msa = 1 if msa08 == 1label define msan 0 "Not in MSA" 1 "In MSA" label values msa msangen region = 1 if region08 == 1replace region = 2 if region08 == 3replace region = 3 if region08 == 2replace region = 4 if region08 == 4label define regi 1 "North East" 2 "South" 3 "Midwest" 4 "West" label values region regigen healthstatus = 1 if rthlth42 == 1replace healthstatus = 2 if rthlth42 == 2replace healthstatus = 3 if rthlth42 == 3replace healthstatus = 4 if rthlth42 == 4replace healthstatus = 5 if rthlth42 == 5label define health 1 "Excellent" 2 "Very Good" 3 "Good" 4 "Fair" 5 "Poor" label values healthstatus healthgen fpl = 1 if povcat08 == 1replace fpl = 2 if povcat08 == 2replace fpl = 3 if povcat08 == 3replace fpl = 4 if povcat08 == 4replace fpl = 5 if povcat08 == 5label define fplstat 1 "Poor" 2 "Near Poor" 3 "Low Income" 4 "Middle Income" 5 "High Income"label values fpl fplstat/* Take a look at the independent variables 2*/svy, subpop(if age08x>17): tabulate agecat, count cell format(%11.0g) /*format intented only for count since it was displaying things in scientific notation*/svy, subpop(if age08x>17): tabulate female, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate race, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate education, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate insurance, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate msa, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate region, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate healthstatus, count cell format(%11.0g)svy, subpop(if age08x>17): tabulate fpl, count cell format(%11.0g) /* Run the model in the assignment  */char agecat[omit] 2char race[omit] 1char healthstatus[omit] 1char education[omit] 3char insurance[omit] 1char region[omit] 1char fpl[omit] 5xi: svy, subpop(if age08x>17): reg healthexp i.agecat female i.race i.education i.insurance i.fpl msa i.region i.healthstatustest _Ihealthsta_2 _Ihealthsta_3 _Ihealthsta_4 _Ihealthsta_5test _Ifpl_1 _Ifpl_2 _Ifpl_3 _Ifpl_4